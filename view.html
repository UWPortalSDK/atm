<!-- Primary template that will get shown when widget loads -->
<script type="text/ng-template" id="atmMain.html"> 
    
    <widget-row ng-repeat="item in locData.atmData">
        <widget-cell>
            <div>{{item.name}}</div>
            <div>{{item.note}}</div>
            <div> latitude: {{item.latitude}} </div>
            <div> longitude: {{item.longitude}} </div>
        </widget-cell>
    </widget-row>
    
    
    <widget-row ng-repeat="item in locData.foodServiceData">
        <widget-cell>
            <div>{{item.outlet_name}}</div>
            <div>{{item.building}}</div>
            <div> latitude: {{item.latitude}} </div>
            <div> longitude: {{item.longitude}} </div>
        </widget-cell>
    </widget-row>
    
    <widget-row ng-repeat="item in locData.FedData">
        <widget-cell>
            <div>{{item.outlet_name}}</div>
            <div>{{item.building}}</div>
            <div> latitude: {{item.latitude}} </div>
            <div> longitude: {{item.longitude}} </div>
        </widget-cell>
    </widget-row>

</script>

<!-- This template gets shown when user clicks one of the items in the list -->
<script type="text/ng-template" id="atmDetails.html"> 
	<!-- 'wr' and 'wc' are short for 'widget-row' and 'widget-cell' -->
	<wr>
		<wc><h2>{{detailsItem.title}}</h2></wc>
	</wr>
	<wr><wc><span ng-repeat= "tag in detailsItem.tags" class="label label-success">{{tag}}</span></wc></wr>
	<wr><wc><div class="pDetails">{{detailsItem.details}}</div></wc></wr>
</script>

<div id="map" style="width: 500px; height: 400px;"></div>
<script>
var locations = [];
</script>

<div ng-repeat="item in atmData.value">
<script>
locations.push({lat: item.latitude, lng: item.longitude, title: item.name});
</script>
</div>


        <script>
  function initMap() {
 
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 1,
          center: locations[0]
        });
        var marker = new google.maps.Marker({
          position: locations[0],
          map: map
        });
      }
</script>
    </widget-row>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSd-W9DTEV2ND-n_D3FMUHo5GxTaRrCKU&callback=initMap">
</script>